# Theme/Dark-Light Update Report

Summary
-------
This change centralizes the application's visual theme and adds runtime Dark/Light support.

Files changed
-------------
- `src/utils/styles.py` â€” `ModernTheme` now accepts a `mode` ('light'|'dark') and contains separate palettes for both modes.
- `src/utils/utils.py` â€” `ThemeManager` reads the persisted theme from `config/preferences.json`, exposes `set_theme(mode)` and `toggle_theme()` to change and persist the theme.
- `main.py` â€” a theme toggle button added to the main control bar (ğŸŒ™ / â˜€ï¸). The button toggles the theme and updates `config/preferences.json`.

Behavior & Notes
----------------
- The theme preference is persisted in `config/preferences.json` under the `theme` key.
- The toggle updates the UI style by re-instantiating `ModernTheme(root, mode=...)`. Most widgets use the centralized styles exposed by the theme manager.
- Some hard-coded colors still exist (e.g. tooltip background) and can be replaced in a follow-up pass to ensure 100% theme coverage.

How to test locally
-------------------
1. Activate your venv and run the app:

```powershell
& .\venv\Scripts\Activate.ps1
python main.py
```

2. In the main window, click the theme icon in the control bar (ğŸŒ™ / â˜€ï¸). Observe the palette switching across pages.
3. Check `config/preferences.json` â€” it should contain the last selected theme, e.g. `{ "theme": "light" }` or `{ "theme": "dark" }`.
4. Open pages (forms, dashboard) to validate text contrast, entry backgrounds, and controls.

Planned follow-ups
------------------
- Replace remaining hard-coded color values with `theme_manager.colors[...]` references (ToolTips, a few labels).
- Polish button styles (hover states, focus outlines) using the centralized palette.
- Optional: provide a Preferences dialog to change theme and other UX settings.

If you'd like, I can open a PR with these changes and the follow-ups (color replacements + polish) in separate commits for easier review.

---
Generated by an automated refactor on behalf of the project maintainer.
